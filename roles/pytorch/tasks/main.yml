---
- name: Install PyTorch in virtualenv
  pip:
    name: "{{ item }}"
    virtualenv: "{{ venv_root }}/pytorch_env"
    virtualenv_python: python3.7
  loop:
    - torch
    - torchvision
    - torch-scatter
    - torch-sparse
    - torch-cluster
    - scikit-learn
    - scikit-image
    - googledrivedownloader
    - requests

- name: Yield to regular user (cloudlab only)
  #  include_tasks: cloudlab.yml
  when: "'cloudlab' in group_names"
  file:
    path: "{{ venv_root }}/pytorch_env"
    owner: "{{ ansible_ssh_user }}"
    recurse: yes
